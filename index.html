<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Toys For Boys â€¢ Just Kidding Creations</title>
  <meta name="description" content="An intentionally terrible (but secretly good) website by JustKiddingCreations.org. It's a joke. Please laugh responsibly." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ðŸ§¸</text></svg>">
  <style>
    :root{
      --bg: #000;
      --fg: #00ffea;
      --accent: #ff00aa;
      --warn: #ffd400;
    }
    /* intentionally chaotic but usable */
    html,body{height:100%;}
    body{
      margin:0; font-family: 'Comic Sans MS', 'Comic Sans', system-ui, sans-serif;
      background-image: radial-gradient(circle at 20% 20%, rgba(255,0,170,.2), transparent 40%),
                        radial-gradient(circle at 80% 10%, rgba(0,255,234,.2), transparent 45%),
                        radial-gradient(circle at 30% 80%, rgba(255,212,0,.2), transparent 40%),
                        repeating-linear-gradient(45deg, #111 0 10px, #0a0a0a 10px 20px);
      color: var(--fg);
      overflow-x:hidden;
    }
    .wrap{max-width:1100px; margin:0 auto; padding:16px;}
    header{
      position:sticky; top:0; z-index:9; backdrop-filter: blur(6px);
      background: rgba(0,0,0,.7); border-bottom: 3px dashed var(--accent);
    }
    .logo{display:flex; align-items:center; gap:12px;}
    .logo h1{margin:8px 0; font-size: clamp(26px, 4vw, 44px); text-shadow: 2px 2px 0 #f0f, -2px -2px 0 #0ff;}
    nav{display:flex; flex-wrap:wrap; gap:8px; margin:8px 0 12px;}
    .btn{
      border: 3px ridge var(--fg); padding:8px 12px; cursor:pointer; background:#111; color:var(--fg);
      text-transform:uppercase; letter-spacing:1px; font-weight:900; box-shadow:0 0 0 2px #111, 0 0 12px rgba(0,255,234,.3) inset;
    }
    .btn:hover{transform: translateY(-1px) rotate(-.5deg); box-shadow:0 0 16px rgba(255,0,170,.6);}
    .marquee{white-space:nowrap; overflow:hidden; border:3px groove var(--warn); background:#130013; color:#fff;
      text-shadow:0 0 6px var(--warn); font-weight:900;}
    .marquee span{display:inline-block; padding:8px 16px; animation: scroll 18s linear infinite;}
    @keyframes scroll{from{transform:translateX(100%)} to{transform:translateX(-100%)} }
    main{padding:16px;}
    section{display:none; animation: pop .25s ease-out;}
    section.active{display:block;}
    @keyframes pop { from{transform:scale(.98); opacity:.4} to{transform:scale(1); opacity:1} }
    .card{
      background: rgba(255,255,255,.03);
      border: 3px double var(--fg);
      padding: 16px; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,.6);
    }
    .grid{display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:16px;}
    /* Added for consistent vertical spacing within grids */
    .grid > div {
        margin-bottom: 20px;
    }
    .toy{
      background: #0a0a0a; border: 3px outset var(--accent); border-radius: 16px; padding: 12px; position:relative;
    }
    .toy h3{margin:8px 0 4px;}
    .badge{position:absolute; top:-10px; right:-10px; background:var(--warn); color:#000; border:3px solid #000; padding:4px 8px; transform: rotate(10deg); font-weight:900;}
    .blink{animation: blink 1s step-start infinite;}
    @keyframes blink { 50%{ opacity:0 } }
    .footer{
      margin-top:40px; border-top:3px dashed var(--accent); padding:16px; font-size:14px; opacity:.9;
    }
    /* popup */
    .modal{position:fixed; inset:0; display:none; place-items:center; background: rgba(0,0,0,.8); z-index: 100;}
    .modal.open{display:grid;}
    .modal .box{background:#111; border:4px solid var(--warn); padding:20px; max-width:560px; border-radius:16px;}
    .counter{font-variant-numeric: tabular-nums;}
    a{color:#ffd400}
    a:hover{text-decoration:none;}
    .tiny{font-size:12px; opacity:.8}

    /* Updated sticky tip styles */
    .tip-note {
      position: fixed; /* Stays in place relative to the viewport */
      background-color: #fce77a; /* Sticky note yellow */
      color: #333;
      border: 2px solid #a38d2f;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.4);
      z-index: 50; /* Below modals, above general content */
      width: 200px;
      max-width: 80vw; /* Responsive width */
      transition: transform 0.2s ease-out, opacity 0.2s ease-out;
      transform: rotate(calc(var(--rotation) * 1deg)); /* Apply random slight rotation */
      cursor: default; /* Not clickable except for close button */
    }
    .tip-note p {
      margin: 0 0 10px 0;
      font-size: 16px;
      line-height: 1.4;
      font-family: 'Comic Sans MS', 'Comic Sans', system-ui, sans-serif; /* Keep comic sans feel */
    }
    .tip-close {
      position: absolute;
      top: 5px;
      right: 5px;
      background: #c0c0c0;
      border: 1px solid #888;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      cursor: pointer;
      font-size: 14px;
      line-height: 1;
      color: #333;
    }
    .tip-close:hover {
      background-color: #e0e0e0;
    }
    /* Removed .loading-spinner as AI features are removed */
    /* .loading-spinner {
      border: 2px solid #f3f3f3;
      border-top: 2px solid #3498db;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      animation: spin 1s linear infinite;
      display: inline-block;
      vertical-align: middle;
      margin-left: 8px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    } */

    /* Removed Ask the Guru styles as AI features are removed */
    /* .guru-ask-section {
      margin-top: 24px;
      border-top: 3px dashed var(--fg);
      padding-top: 16px;
    }
    .guru-ask-section textarea {
      width: 100%;
      min-height: 80px;
      padding: 10px;
      margin-bottom: 12px;
      border: 2px solid var(--fg);
      background: #0a0a0a;
      color: var(--fg);
      font-family: 'Comic Sans MS', 'Comic Sans', system-ui, sans-serif;
      border-radius: 8px;
      resize: vertical;
    }
    .guru-response-box {
      margin-top: 16px;
      padding: 15px;
      border: 3px double var(--warn);
      background: rgba(255,212,0,.1);
      border-radius: 12px;
      font-style: italic;
      color: var(--warn);
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .guru-response-box.hidden {
        display: none;
    } */

    /* Styles for cart items */
    .cart-item {
        background: rgba(255, 255, 255, 0.05);
        border: 2px dashed var(--fg);
        padding: 10px;
        margin-bottom: 8px;
        border-radius: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .cart-item span {
        font-weight: bold;
    }
    .cart-empty-message {
        text-align: center;
        margin-top: 20px;
        font-style: italic;
        opacity: 0.8;
    }

    /* New styles for explicit content page */
    .explicit-toy {
        background: #1a0a1a; /* Darker background */
        border: 3px outset var(--accent); /* Same accent color */
        border-radius: 16px;
        padding: 12px;
        position: relative;
        text-align: center;
        box-shadow: 0 0 15px rgba(255, 0, 170, 0.4); /* More glow */
    }
    .explicit-toy .emoji-icon {
        font-size: 60px; /* Larger emojis */
        margin-bottom: 8px;
        filter: drop-shadow(0 0 5px var(--warn)); /* subtle glow on emoji */
    }
    .explicit-toy h3 {
        margin: 8px 0 4px;
        color: var(--fg);
        text-shadow: 1px 1px 0 #f0f;
    }
    .explicit-toy p {
        font-size: 15px;
        color: rgba(0, 255, 234, 0.9);
        margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="logo">
        <div style="font-size:40px">ðŸ§¸</div>
        <h1>ToysForBoys<span class="blink">.org</span> <small style="font-size:.5em; color:#fff">by JustKiddingCreations.org</small></h1>
      </div>
      <div class="marquee"><span>ðŸš¨ LIMITED TIME OFFER: buy 1 imaginary wrench, get 0 free! â€¢ ðŸ’¥ Ships nowhere, instantly! â€¢ ðŸ§° Professional-grade jokes only. Do not actually use. ðŸš¨</span></div>
      <nav>
        <button class="btn" data-route="home">Home</button>
        <button class="btn" data-route="catalog">Catalog</button>
        <button class="btn" data-route="cart">Cart <span id="cartCount" style="font-weight:normal;">(0)</span></button>
        <button class="btn" data-route="faq">FAQ</button>
        <button class="btn" data-route="contact">Contact</button>
        <button class="btn" data-route="adult">18+ Gate</button>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section id="home" class="active">
      <div class="card">
        <h2>Welcome, connoisseur of terrible web design.</h2>
        <p>Behold a website so bad it loops back around to <em>art</em>. Sparkly, loud, but secretly accessible and fast. This is a parody siteâ€”no real products, no real sales, just vibes. âœ¨</p>
        <p class="tiny">PSA: Nothing here is adult content. The 18+ gate is a joke mechanic and shows safety messaging only.</p>
      </div>
      <h2 style="margin-top:24px">Trending Totally-Real Products</h2>
      <div class="grid">
        <div class="toy">
          <div class="badge">#1 Seller</div>
          <div style="font-size:48px">ðŸª›</div>
          <h3>Leftâ€‘Handed Screwdriver</h3>
          <p class="tagline">Engineered for right brains and wrong turns. Guaranteed to not fit any screws.</p>
          <button class="btn" onclick="addToCart({name:'Left-Handed Screwdriver', price:'$0.99'})">Add to Cart</button>
        </div>
        <div class="toy">
          <div style="font-size:48px">ðŸª </div>
          <h3>Wireless Plunger</h3>
          <p class="tagline">No cables. No suction. No problem. Pairs via imaginary Bluetooth.</p>
          <button class="btn" onclick="addToCart({name:'Wireless Plunger', price:'$19.99'})">Add to Cart</button>
        </div>
        <div class="toy">
          <div style="font-size:48px">ðŸ§»</div>
          <h3>Quantum Duct Tape</h3>
          <p class="tagline">It both sticks and doesnâ€™t, until you look at it. SchrÃ¶dinger would be proud.</p>
          <button class="btn" onclick="addToCart({name:'Quantum Duct Tape', price:'$5.50'})">Add to Cart</button>
        </div>
        <div class="toy">
          <div class="badge">New!</div>
          <div style="font-size:48px">ðŸ”§</div>
          <h3>Invisiâ€‘Wrench</h3>
          <p class="tagline">Canâ€™t find it? Exactly as designed.</p>
          <button class="btn" onclick="addToCart({name:'Invisiâ€‘Wrench', price:'$25.00'})">Add to Cart</button>
        </div>
      </div>
      <p class="tiny">Cart items go into your browser only. We can't see it. We also can't ship jokes.</p>
    </section>

    <section id="catalog">
      <div class="card">
        <h2>Catalog of Glorious Nonsense</h2>
        <p>Behold our full collection of intentionally useless wonders. Each click is a journey into hilarity!</p>
      </div>
      <div class="grid" id="catalogGrid"></div>
    </section>

    <section id="cart">
        <div class="card">
            <h2>ðŸ›’ Your (Joke) Shopping Cart</h2>
            <p>These are the imaginary items you've added. They exist only in your browser's local storage and our hearts.</p>
            <div id="cartItems">
                <!-- Cart items will be rendered here -->
            </div>
            <div id="cartTotal" style="margin-top: 15px; font-weight: bold; font-size: 1.2em;"></div>
            <button class="btn" onclick="clearCart()" style="margin-top: 20px;">Clear Cart</button>
        </div>
    </section>

    <section id="faq">
      <div class="card">
        <h2>FAQ</h2>
        <details open>
          <summary><strong>Is this a real store?</strong></summary>
          <p>No. It's a comedy website. Please do not try to actually buy the wireless plunger.</p>
        </details>
        <details>
          <summary><strong>Why does it look like 2003?</strong></summary>
          <p>Because 2003 looked like <em>this</em> and it was perfect. Also we love marquees.</p>
        </details>
        <details>
          <summary><strong>Do you collect data?</strong></summary>
          <p>Only a fake visit counter stored in your own browser. We literally cannot see it. Your cart is saved only on your device.</p>
        </details>
        <details>
          <summary><strong>Is there adult content?</strong></summary>
          <p>No. The 18+ area is a compliance gag. It shows a safety message and then some *very* silly, non-explicit adult jokes.</p>
        </details>
      </div>
    </section>

    <section id="contact">
      <div class="card">
        <h2>Contact</h2>
        <p>Business inquiries: <a href="mailto:hey@justkiddingcreations.org">hey@justkiddingcreations.org</a></p>
        <p>Media kit: coming never (or whenever).</p>
        <p>Short link idea: <strong>t4b.justkiddingcreations.org</strong> or <strong>jk.to/boys</strong> (use your URL shortener of choice).</p>
      </div>
    </section>

    <section id="adult">
      <div class="card">
        <h2>ðŸ”ž 18+ Gate</h2>
        <p>Before proceeding, confirm your age. No explicit content is hosted here; this page exists for humor and safety messaging only.</p>
        <button class="btn" onclick="openAgeGate()">I am 18 or older</button>
        <button class="btn" onclick="denyAgeGate()">I am under 18</button>
        <div id="minorBlock" style="display:none; margin-top:16px" class="tiny">
          <p><strong>Heads up:</strong> Some stuff on the internet isnâ€™t for minors. You did the right thing. Enjoy the rest of the site âœ¨</p>
        </div>
      </div>
    </section>

    <!-- New Section for 18+ Explicit Joke Content -->
    <section id="explicitContentPage">
        <div class="card">
            <h2>ðŸŽ‰ Welcome, Esteemed Adult!</h2>
            <p>You've unlocked the secret realm of... well, *more jokes*! Behold our truly inappropriate collection of items, designed exclusively for those who appreciate the finer, sillier side of adult humor. Absolutely no actual adult content, just laughs. ðŸ˜‰</p>
        </div>
        <h2 style="margin-top:24px">Our Top-Secret Adult Toys (Not Really)</h2>
        <div class="grid" id="explicitToyGrid">
            <!-- Explicit joke items will be dynamically loaded here -->
        </div>
        <p class="tiny" style="margin-top:24px;">Remember, these are all jokes. Please laugh responsibly and do not attempt to actually use any of these imaginary items.</p>
    </section>


    <div class="footer">
      <div style="display:flex; align-items:center; gap:12px; flex-wrap:wrap">
        <div>Â© <span id="year"></span> ToysForBoys (a Just Kidding Creations joke)</div>
        <div>â€¢ Visitor # <span id="visits" class="counter">0</span></div>
        <div>â€¢ <a href="#" onclick="secret()">Developer Mode</a></div>
      </div>
    </div>
  </main>

  <div class="modal" id="ageModal" aria-modal="true" role="dialog">
    <div class="box">
      <h3>ðŸ”ž Confirm your age</h3>
      <p>This site does not host explicit content. If you are 18+, you can view a short safety message. If not, weâ€™ll take you back home.</p>
      <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:8px">
        <button class="btn" onclick="confirmAdult()">I am 18+</button>
        <button class="btn" onclick="denyAgeGate()">I am under 18</button>
        <button class="btn" onclick="closeAgeGate()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Custom message box modal -->
  <div class="modal" id="messageBoxModal" aria-modal="true" role="dialog">
    <div class="box">
      <h3 id="messageBoxTitle"></h3>
      <p id="messageBoxContent"></p>
      <div style="display:flex; justify-content:flex-end; margin-top:16px;">
        <button class="btn" onclick="closeMessageBox()">OK</button>
      </div>
    </div>
  </div>

  <script>
    // ** IMPORTANT: This URL points to your Cloudflare Worker that handles the visitor count. **
    const VISITOR_COUNT_WORKER_URL = "https://toysforboyscount.afedel.workers.dev/"; 

    // simple router
    const sections = [...document.querySelectorAll('main section')];
    const open = (id)=>{
      sections.forEach(s=>s.classList.toggle('active', s.id===id));
      // If navigating to the cart, render it
      if (id === 'cart') {
          renderCart();
      }
      window.scrollTo({top:0, behavior:'smooth'});
    };
    document.querySelectorAll('[data-route]').forEach(btn=>{
      btn.addEventListener('click',()=>open(btn.dataset.route));
    });

    // year update
    document.getElementById('year').textContent = new Date().getFullYear();
    
    // ** REAL VISITOR COUNT LOGIC **
    async function updateVisitorCount() {
        const visitsElement = document.getElementById('visits');
        visitsElement.textContent = 'Loading...';

        try {
            const response = await fetch(VISITOR_COUNT_WORKER_URL);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            if (data && data.count !== undefined) {
                visitsElement.textContent = data.count.toString().padStart(6,'0');
            } else {
                console.error('Worker response missing count:', data);
                visitsElement.textContent = 'ERROR';
            }
        } catch (error) {
            console.error('Failed to fetch visitor count:', error);
            visitsElement.textContent = 'ERROR';
            showMessageBox('Error', 'Could not load visitor count. Please check your internet connection or the Cloudflare Worker setup.');
        }
    }

    window.addEventListener('load', updateVisitorCount);


    // Array of predefined items. Each item includes an icon, name, and an initial tagline.
    const items = [
      {icon:'ðŸªš', name:'Leftâ€‘Handed Screwdriver', tagline:'Engineered for right brains and wrong turns. Guaranteed to not fit any screws.', price:'$0.99'},
      {icon:'ðŸª ', name:'Wireless Plunger', tagline:'No cables. No suction. No problem. Pairs via imaginary Bluetooth.', price:'$19.99'},
      {icon:'ðŸ§»', name:'Quantum Duct Tape', tagline:'It both sticks and doesnâ€™t, until you look at it. SchrÃ¶dinger would be proud.', price:'$5.50'},
      {icon:'ðŸ”§', name:'Invisiâ€‘Wrench', tagline:'Canâ€™t find it? Exactly as designed.', price:'$25.00'},
      // New Items added to normal catalog
      {icon:'ðŸ’§', name:'Double-Sided Non-Stick Glue', tagline:'Bonds nothing to nothing, perfectly. The ultimate paradox in a bottle!', price:'$7.77'},
      {icon:'ðŸ§¤', name:'4 Finger Glove (No Thumb)', tagline:'Designed for... unique hand anatomies. Perfect for high-fives with three friends!', price:'$4.00'},
      {icon:'ðŸ›‹ï¸', name:'Single-Use Deflatable Couch', tagline:'Inflates for comfort, then permanently deflates for instant disposal. Eco-unfriendly and proud!', price:'$149.99'},
      {icon:'ðŸ§©', name:'A Puzzle With No Fitting Pieces', tagline:'Experience true frustration as every piece defies assembly. Mindfulness through futility!', price:'$12.34'},
      {icon:'ðŸš²', name:'Bike That Pedals Backwards', tagline:'Propel yourself into the past, or just confuse everyone. Great for competitive un-cycling!', price:'$299.99'},
      {icon:'ðŸ¥„', name:'Dissolvable Spoons (Cereal Edition)', tagline:'Enjoy your cereal, then watch your spoon vanish! For a truly immersive eating experience.', price:'$3.00'},
      {icon:'ðŸš—', name:'Manual Car (Drive, Reverse, and 1st)', tagline:'All the thrill of manual, none of the gears beyond the essentials. Good luck on the highway!', price:'$9999.00'}
    ];

    const grid = document.getElementById('catalogGrid');
    // Function to render the product grid
    function renderCatalogGrid() {
      grid.innerHTML = items.map(item => `
        <div class="toy">
          <div class="badge">wow</div>
          <div style="font-size:48px">${item.icon}</div>
          <h3>${item.name}</h3>
          <p class="tagline">${item.tagline}</p>
          <button class="btn" onclick="addToCart(${JSON.stringify(item).replace(/'/g, "&#39;")})">Add to Cart</button>
        </div>
      `).join('');
    }
    // Initial render of the catalog
    renderCatalogGrid();

    // ** REAL SHOPPING CART LOGIC (Local Storage) **
    const CART_STORAGE_KEY = 'toysForBoysCart';
    const cartCountElement = document.getElementById('cartCount');
    const cartItemsElement = document.getElementById('cartItems');
    const cartTotalElement = document.getElementById('cartTotal');

    function getCart() {
        try {
            const cartString = localStorage.getItem(CART_STORAGE_KEY);
            return cartString ? JSON.parse(cartString) : [];
        } catch (e) {
            console.error("Error reading cart from localStorage:", e);
            return [];
        }
    }

    function saveCart(cart) {
        try {
            localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));
            updateCartCountDisplay();
        } catch (e) {
            console.error("Error saving cart to localStorage:", e);
            showMessageBox('Cart Error', 'Could not save cart. Your browser might be full or in private mode.');
        }
    }

    function addToCart(item) {
        let cart = getCart();
        cart.push(item);
        saveCart(cart);
        showMessageBox('Added to Cart!', `${item.name} has been added to your joke cart!`);
    }

    function clearCart() {
        saveCart([]); // Save an empty array
        renderCart(); // Re-render the cart display
        showMessageBox('Cart Cleared!', 'Your joke cart is now empty. Time to fill it with more nonsense!');
    }

    function renderCart() {
        const cart = getCart();
        cartItemsElement.innerHTML = ''; // Clear previous items
        let total = 0;

        if (cart.length === 0) {
            cartItemsElement.innerHTML = '<p class="cart-empty-message">Your cart is currently filled with... air!</p>';
        } else {
            cart.forEach((item, index) => {
                const itemPrice = parseFloat(item.price.replace('$', '')) || 0;
                total += itemPrice;

                const cartItemDiv = document.createElement('div');
                cartItemDiv.className = 'cart-item';
                cartItemDiv.innerHTML = `
                    <span>${item.icon || 'ðŸ“¦'} ${item.name}</span>
                    <span>${item.price}</span>
                `;
                cartItemsElement.appendChild(cartItemDiv);
            });
        }
        cartTotalElement.textContent = `Total Imaginary Cost: $${total.toFixed(2)}`;
        updateCartCountDisplay();
    }

    function updateCartCountDisplay() {
        const cart = getCart();
        cartCountElement.textContent = `(${cart.length})`;
    }

    // Initialize cart count display on load
    window.addEventListener('load', updateCartCountDisplay);


    // 18+ gate logic (updated to open explicit content page)
    const ageModal = document.getElementById('ageModal');
    function openAgeGate(){ ageModal.classList.add('open'); }
    function closeAgeGate(){ ageModal.classList.remove('open'); }
    function confirmAdult(){
      closeAgeGate();
      open('explicitContentPage');
      document.getElementById('minorBlock').style.display='none';
    }
    function denyAgeGate(){
      closeAgeGate();
      document.getElementById('minorBlock').style.display='block';
      open('home');
    }

    let clicks=0;
    function secret(){
      clicks++;
      if(clicks%3===0){
        showMessageBox('Developer Mode', 'Developer Mode unlocked! (There is no developer mode.)');
      }
    }

    const messageBoxModal = document.getElementById('messageBoxModal');
    const messageBoxTitle = document.getElementById('messageBoxTitle');
    const messageBoxContent = document.getElementById('messageBoxContent');
    let messageBoxCallback = null;

    function showMessageBox(title, message, callback = null) {
      messageBoxTitle.textContent = title;
      messageBoxContent.textContent = message;
      messageBoxCallback = callback;
      messageBoxModal.classList.add('open');
    }

    function closeMessageBox() {
      messageBoxModal.classList.remove('open');
      if (messageBoxCallback) {
        messageBoxCallback();
        messageBoxCallback = null;
      }
    }

    // --- Sticky Tips (original joke content, reduced quantity) ---

    const mildAdultJokes = [
      "My therapist told me to embrace my flaws. So I gave them a hug and then asked for money.",
      "Being an adult is mostly googling 'how to adult' and hoping for the best.",
      "Iâ€™ve finally reached the age where my brain goes from 'you probably shouldn't' to 'I wonder if it's worth the paperwork.'",
      "My 'to-do' list has reached an impressive length. It's mostly just 'don't die'.",
      "I'm not lazy, I'm just on energy-saving mode.",
      "I'm at that age where my back goes out more than I do.",
      "I've got a bad case of the 'I don't wanna's today.",
      "My bank account is just a joke. The punchline is 'insufficient funds'.",
      "My ability to remember song lyrics from the 90s far exceeds my ability to remember why I walked into this room.",
      "Iâ€™m fluent in three languages: English, Sarcasm, and Profanity (only when really necessary)."
    ];

    function getRandomArbitrary(min, max) {
      return Math.random() * (max - min) + min;
    }

    function createStickyTip() {
      const joke = mildAdultJokes[Math.floor(Math.random() * mildAdultJokes.length)];

      const tipNote = document.createElement('div');
      tipNote.className = 'tip-note';
      tipNote.style.setProperty('--rotation', getRandomArbitrary(-5, 5));

      const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
      const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

      const leftPercent = getRandomArbitrary(5, 75);
      const topPercent = getRandomArbitrary(10, 80);

      tipNote.style.left = `${leftPercent}vw`;
      tipNote.style.top = `${topPercent}vh`;

      const jokeText = document.createElement('p');
      jokeText.textContent = joke;
      tipNote.appendChild(jokeText);

      const closeButton = document.createElement('button');
      closeButton.className = 'tip-close';
      closeButton.textContent = 'x';
      closeButton.ariaLabel = 'Close tip';
      closeButton.onclick = () => {
        tipNote.style.opacity = '0';
        tipNote.style.transform = 'scale(0.8) rotate(calc(var(--rotation) * 1deg))';
        setTimeout(() => tipNote.remove(), 200);
      };
      tipNote.appendChild(closeButton);

      document.body.appendChild(tipNote);
    }

    window.addEventListener('load', () => {
      const numberOfTips = Math.floor(Math.random() * 2) + 1;
      for (let i = 0; i < numberOfTips; i++) {
        createStickyTip();
      }
    });
    
    // --- New 18+ Explicit Joke Content Data and Rendering ---

    const explicitJokeItems = [
        { icon: 'ðŸ‘', name: 'The Backdoor Policy Manual', description: 'Comprehensive guide to unexpected entries and exits. Batteries not included, just complex regulations.', price: 'Free (with purchase of wisdom)' },
        { icon: 'ðŸ†', name: 'Infinite Expansion Wand', description: 'Guaranteed to increase in size... metaphorically, of course. For those who believe in magic tricks.', price: 'Priceless' },
        { icon: 'ðŸ’¦', name: 'Lubricant of Loud Laughter', description: 'Reduces friction in social situations. Apply liberally for maximum awkward chuckles.', price: 'BYOL (Bring Your Own Laughter)' },
        { icon: 'ðŸ’', name: 'Cherry Popper 5000', description: 'A highly advanced device for opening stubborn jars. Also, it\'s red and shiny.', price: 'Collector\'s Item' },
        { icon: 'ðŸ©', name: 'The Glazed Ring of Power', description: 'One ring to rule them all, especially on cheat days. May lead to excessive sugar rushes.', price: 'Worth its weight in sprinkles' },
        { icon: 'ðŸ‘…', name: 'The Silent Whistle', description: 'For summoning service when you don\'t want to use your voice. Highly effective for getting attention... sometimes.', price: 'Speak to your inner child' },
        { icon: 'ðŸ¤', name: 'The Firm Handshake Device', description: 'Ensures a confident grip in all business negotiations. Not for actual hand-holding.', price: 'Solid Investment' },
        { icon: 'ðŸ”¥', name: 'The Burning Desire Extinguisher', description: 'Quickly puts out those inconvenient urges to do actual work. For professional procrastinators.', price: 'Essential for Netflix binging' },
        { icon: 'ðŸš€', name: 'Personal Thruster Pack', description: 'Experience exhilarating vertical ascension... from your couch to the fridge. Fuel is optional.', price: 'Unlimited flights of fancy' },
        { icon: 'ðŸŒ', name: 'The Banana Hammock (Miniature)', description: 'A tiny hammock for your tiny, decorative bananas. Perfect for desk decor.', price: 'Small but mighty' },
        { icon: 'ðŸŽˆ', name: 'The Inflatable Ego Booster', description: 'Just add air! Watch your self-esteem inflate, then deflate slowly over time. Reusable!', price: 'A breath of fresh air' },
        { icon: 'ðŸ§¦', name: 'The Missing Sock Locator', description: 'Guaranteed to NOT find the other sock. Its purpose is to confirm the universe\'s sense of humor.', price: 'Infinite Loops of Mystery' },
        // New explicit item
        {icon:'ðŸŽ®', name:'Controller with 3 Joysticks', description:'For the truly indecisive gamer. Experience triple the confusion and zero added functionality. Advanced frustration guaranteed!', price:'$69.42'}
    ];

    function renderExplicitJokeGrid() {
        const explicitToyGrid = document.getElementById('explicitToyGrid');
        explicitToyGrid.innerHTML = explicitJokeItems.map(item => `
            <div class="explicit-toy">
                <div class="emoji-icon">${item.icon}</div>
                <h3>${item.name}</h3>
                <p>${item.description}</p>
                <p><strong>Price:</strong> ${item.price}</p>
                <button class="btn" onclick="addToCart(${JSON.stringify(item).replace(/'/g, "&#39;")})">Add to Cart</button>
            </div>
        `).join('');
    }

    window.addEventListener('load', renderExplicitJokeGrid);

  </script>
</body>
</html>
